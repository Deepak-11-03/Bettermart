import Head from "next/head";
import style from '../../styles/Home.module.css'
import CurrencyRupeeIcon from '@mui/icons-material/CurrencyRupee';
import { useRouter } from "next/router";
import Grid from '@mui/material/Grid';
import { Card,CardActionArea,CardContent,CardMedia, Chip, Paper, Typography } from "@mui/material";
import Error from "../_error";
import ProductList from "../../Components/ProductList";

export default function Home({ data}) {
if(data.status === false){
  return (
    <Error/>
  )
}
  return (
    <>
      <Head>
        <title>All products | BetterMart</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={style.main}>
        <ProductList data={data} />
      </main>
      
    </>
  );
}

export async function getServerSideProps() {


  const res = await fetch(`${process.env.BASE_URL}/api/products`);
  const data =  await res.json();
  return {
    props: { data },
  };
}
